<!DOCTYPE html>
<html lang="be">
<head>
    <meta charset="UTF-8">
    <script type = "text/javascript" src = "http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<style type="text/css">
		body {
		    font-family: sans-serif;
		    font-size: 80%;
		}
		table {
		    border-collapse: collapse;
		}
		td, th {
		    border: 1px solid black;
		}
		.err {
			background-color: #FF8080;
		}
	</style>
</head>
<body>
#set ( $d = "$")
<script language="javascript">
    function send(cmd) {
        ${d}.ajax("http://127.0.0.1:8111/"+cmd);
        return false;
    }
    function sendAll() {
      var checkedValues = ${d}('input:checkbox:checked').map(function() {
        return this.value;
      }).get();
      ${d}.ajaxSetup({async: false});
      checkedValues.forEach(function(cmd) {
        ${d}.ajax("http://127.0.0.1:8111/"+cmd);
      });
      ${d}('input:checkbox:checked').map(function() {
        this.checked = false;
      }).get();
    }
</script>

<!--button onClick="javascript: sendAll();" style="position: fixed; right: 150px; top: 50px">Даслаць у JOSM</button-->

<b><u>Вынікі ад ${currentDateTime}</u></b> <br/><br/>

<a href="#p1">Памылкі (${data.nonExistInOsm.size()})</a><br/>
<a href="#p2">Няправільныя назвы і тэгі (${data.incorrectTags.rows.size()})</a><br/>
<a href="#p4">Няма ў даведніку (${data.unusedInDav.size()})</a><br/>

<br/>
<br/>
<br/>

<h1 id="p1">Памылкі (${data.nonExistInOsm.size()}):</h1> ID аб'екта ёсьць у даведніку, але няма на мапе
<ul>
    #foreach ( $str in $data.nonExistInOsm )
        <li>${str}</li>
    #end
</ul>

<h1 id="p2">Няправільныя назвы і тэгі (${data.incorrectTags.rows.size()}):</h1>

<div style="color:red; border-style: solid; border-color: red">
Націсьніце на радыё-кнопку(<input type='radio'>) каб даслаць зьмены ў JOSM.<br/>
<b>JOSM мае непрыемны баг - калі дасылаеце зьмены, але папярэднія яшчэ не запісаліся ў Command Stack, новыя зьмены будуць зробленыя на папярэднім аб'екце !!!<br/>
Таму трэба дачакацца пакуль спрацуе папярэдняя каманда, і толькі потым націскаць наступную рады-кнопку !</b>
</div>
<br/>

#set ( $table = $data.incorrectTags )
#parse ("org/alex73/osm/validators/harady/result_table.velocity")

<h1 id="p4">Няма ў даведніку (${data.unusedInDav.size()}):</h1> аб'екты мапы на якіх няма спасылак у даведніку
<ul>
    #foreach ( $str in $data.unusedInDav )
        <li>${str}</li>
    #end
</ul>

</body>
</html>
